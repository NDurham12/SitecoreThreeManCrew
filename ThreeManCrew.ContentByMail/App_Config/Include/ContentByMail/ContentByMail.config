<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>      
      <setting name="ContentByEmail.ModuleItem" value="{B76303D1-0457-4C01-A242-345CBBB6E360}" />
      <setting name="ContentByEmail.EmailRequestManager" value="{4A0236F2-A510-4942-9052-AFE90ACE207A}" />
      <setting name="ContentByEmail.ServiceAccount" value="sitecore\svcContentByMail" />
      <setting name="ContentByEmail.TokenStartEndMultilineRegex" value="\[([\w])\w+\]([^\[/]*)\[/(\w)+\]" />
      <setting name="ContentByEmail.TokenTextInside" value="\[([\w])\w+\s.*\]" />
      <setting name="ContentByEmail.TokenMissingEnding" value="\[([\w])\w+\]([^(\[|\[/)]*)" />      
    </settings>
    <sites>
      <site name="website">
        <patch:attribute name="itemwebapi.mode">StandardSecurity</patch:attribute>
        <patch:attribute name="itemwebapi.access">ReadWrite</patch:attribute>
        <patch:attribute name="itemwebapi.allowanonymousaccess">true</patch:attribute>
      </site>
    </sites>
    <pipelines>
      <itemWebApiRequest>
        <processor type="ThreeManCrew.ContentByMail.Pipelines.ItemWebApiRequest.PostmarkRequestProcessor, ThreeManCrew.ContentByMail"
                   patch:after="processor[@type='Sitecore.ItemWebApi.Pipelines.Request.CheckSecurity, Sitecore.ItemWebApi']" />
      </itemWebApiRequest>
      <ContentByMail.ProcessEmail>
        <!-- Implement ContentByMail.Pipelines.IEmailMessageProcessor for custom processors and replace this out-of-the-box processor -->
        <processor type="ContentByMail.Pipelines.ContentByMail.ProcessEmail.SimpleEmailMessageProcessor, ContentByMail" />
      </ContentByMail.ProcessEmail>
    </pipelines>
  </sitecore>
</configuration>